2024-11-15 22:56:00,744 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-15 23:56:47,448 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-15 23:57:05,166 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-15 23:59:47,662 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-16 00:00:42,492 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-16 00:01:15,682 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-16 00:17:53,143 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-16 00:21:54,196 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-16 00:22:02,316 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-16 02:35:52,552 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: POST http://localhost:8888/api/v1/auth/login
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\auth_routes.py", line 47, in login
    |     return  await auth_controller.login_user(user_data)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\auth_controller.py", line 135, in login_user
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\auth_routes.py", line 47, in login
    return  await auth_controller.login_user(user_data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\auth_controller.py", line 135, in login_user
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-16 02:39:07,117 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: POST http://localhost:8888/api/v1/auth/login
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\auth_routes.py", line 47, in login
    |     return  await auth_controller.login_user(user_data)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\auth_controller.py", line 135, in login_user
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\auth_routes.py", line 47, in login
    return  await auth_controller.login_user(user_data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\auth_controller.py", line 135, in login_user
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-16 02:40:26,827 - ERROR - 
2024-11-16 02:40:38,536 - ERROR - 
2024-11-16 02:41:18,502 - ERROR - 
2024-11-16 10:20:06,684 - ERROR - Internal Server Error: object NoneType can't be used in 'await' expression - Request: GET http://localhost:8888/api/v1/hospital/users
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 67, in __call__
    |     await self.verify_token_data(token_data)
    | TypeError: object NoneType can't be used in 'await' expression
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 67, in __call__
    await self.verify_token_data(token_data)
TypeError: object NoneType can't be used in 'await' expression
2024-11-16 10:20:07,320 - ERROR - Internal Server Error: object NoneType can't be used in 'await' expression - Request: GET http://localhost:8888/api/v1/hospital/users
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 67, in __call__
    |     await self.verify_token_data(token_data)
    | TypeError: object NoneType can't be used in 'await' expression
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 67, in __call__
    await self.verify_token_data(token_data)
TypeError: object NoneType can't be used in 'await' expression
2024-11-16 10:37:26,936 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users
2024-11-16 10:37:27,198 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users
2024-11-16 16:36:38,777 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-18 23:10:17,622 - ERROR - Error occurred: UserNotFound -  - Request: POST http://localhost:8888/api/v1/department/
2024-11-18 23:10:40,719 - ERROR - Error occurred: UserNotFound -  - Request: POST http://localhost:8888/api/v1/department/
2024-11-18 23:55:40,003 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-18 23:55:40,003 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\auth_routes.py", line 32, in verify
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\auth_routes.py", line 32, in verify
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-18 23:55:40,918 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-18 23:55:40,918 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\auth_routes.py", line 32, in verify
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\auth_routes.py", line 32, in verify
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-18 23:57:50,518 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-18 23:57:50,519 - ERROR - 500: Ooops! Something went wrong
2024-11-18 23:57:51,082 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-18 23:57:51,083 - ERROR - 500: Ooops! Something went wrong
2024-11-18 23:58:13,502 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-18 23:58:13,502 - ERROR - 500: Ooops! Something went wrong
2024-11-18 23:58:13,929 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-18 23:58:13,929 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:01:00,346 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:01:00,346 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:01:00,714 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:01:00,726 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:02:49,509 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:02:49,509 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:02:49,886 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:02:49,886 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:04:36,815 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:04:36,815 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:04:37,181 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:04:37,181 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:30:07,693 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:30:07,693 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:30:08,092 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:30:08,092 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:30:30,978 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:30:30,978 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:30:31,370 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:30:31,372 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:31:40,535 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:31:40,536 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:31:40,904 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:31:40,904 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:34:00,061 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:34:00,061 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:34:00,528 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:34:00,528 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:34:26,997 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:34:26,997 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:34:27,479 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:34:27,479 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:34:56,463 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:34:56,463 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:34:56,928 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:34:56,928 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:36:33,968 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:36:33,968 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:36:34,414 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-19 00:36:34,414 - ERROR - 500: Ooops! Something went wrong
2024-11-19 00:51:56,920 - ERROR - Unable to match input value to any allowed input type for the field. Parse errors: [`createOneDepartment.data.status`: Field does not exist in enclosing type., `data.hospitalId`: A value is required but not set]
2024-11-19 00:51:56,922 - ERROR - 500: Unable to match input value to any allowed input type for the field. Parse errors: [`createOneDepartment.data.status`: Field does not exist in enclosing type., `data.hospitalId`: A value is required but not set]
2024-11-19 00:53:41,018 - ERROR - Unable to match input value to any allowed input type for the field. Parse errors: [`createOneDepartment.data.status`: Field does not exist in enclosing type., `data.hospitalId`: A value is required but not set]
2024-11-19 00:53:41,020 - ERROR - 500: Unable to match input value to any allowed input type for the field. Parse errors: [`createOneDepartment.data.status`: Field does not exist in enclosing type., `data.hospitalId`: A value is required but not set]
2024-11-19 00:54:21,704 - ERROR - Unable to match input value to any allowed input type for the field. Parse errors: [`createOneDepartment.data.status`: Field does not exist in enclosing type., `data.hospitalId`: A value is required but not set]
2024-11-19 00:54:21,705 - ERROR - 500: Unable to match input value to any allowed input type for the field. Parse errors: [`createOneDepartment.data.status`: Field does not exist in enclosing type., `data.hospitalId`: A value is required but not set]
2024-11-19 00:59:24,468 - ERROR - Error occurred: InsufficientPermission -  - Request: POST http://localhost:8888/api/v1/department/
2024-11-19 01:09:45,067 - ERROR - Could not find field at `findManyDepartment.where.hospital_id`
2024-11-19 01:09:45,067 - ERROR - 500: Could not find field at `findManyDepartment.where.hospital_id`
2024-11-19 01:09:47,559 - ERROR - Could not find field at `findManyDepartment.where.hospital_id`
2024-11-19 01:09:47,560 - ERROR - 500: Could not find field at `findManyDepartment.where.hospital_id`
2024-11-19 01:09:48,983 - ERROR - Could not find field at `findManyDepartment.where.hospital_id`
2024-11-19 01:09:48,983 - ERROR - 500: Could not find field at `findManyDepartment.where.hospital_id`
2024-11-19 01:10:51,934 - ERROR - Could not find field at `findManyDepartment.where.hospital_id`
2024-11-19 01:10:51,934 - ERROR - 500: Could not find field at `findManyDepartment.where.hospital_id`
2024-11-19 01:11:47,835 - ERROR - Could not find field at `findManyDepartment.where.hospitalid`
2024-11-19 01:11:47,835 - ERROR - 500: Could not find field at `findManyDepartment.where.hospitalid`
2024-11-19 01:12:17,200 - ERROR - 
2024-11-19 01:12:19,296 - ERROR - 
2024-11-19 01:12:20,421 - ERROR - 
2024-11-19 01:13:03,757 - ERROR - 
2024-11-19 01:13:05,499 - ERROR - 
2024-11-19 09:39:31,958 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 09:39:34,810 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 09:39:42,861 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 09:39:47,409 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 09:39:50,301 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 09:40:39,910 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 11:39:59,743 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 11:40:11,619 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 11:44:28,783 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 51, in __call__
    |     print(token_in_blocklist(token_data['jti']))
    |                              ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 51, in __call__
    print(token_in_blocklist(token_data['jti']))
                             ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 11:45:27,074 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 51, in __call__
    |     print("in blacklist : ",token_in_blocklist(token_data['jti']))
    |                                                ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 51, in __call__
    print("in blacklist : ",token_in_blocklist(token_data['jti']))
                                               ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 11:47:10,504 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 51, in __call__
    |     print("\n\nin blacklist : ",token_in_blocklist(token_data['jti']))
    |                                                    ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 51, in __call__
    print("\n\nin blacklist : ",token_in_blocklist(token_data['jti']))
                                                   ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 11:48:20,365 - ERROR - Internal Server Error: 'NoneType' object has no attribute 'update' - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 61, in __call__
    |     token_data.update({"token": self.token})
    |     ^^^^^^^^^^^^^^^^^
    | AttributeError: 'NoneType' object has no attribute 'update'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 61, in __call__
    token_data.update({"token": self.token})
    ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'update'
2024-11-19 11:49:21,986 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 11:52:52,590 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 11:55:18,048 - ERROR - Internal Server Error: 'NoneType' object is not subscriptable - Request: POST http://localhost:8888/api/v1/department/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |                                 ~~~~~~~~~~^^^^^^^
    | TypeError: 'NoneType' object is not subscriptable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 605, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
                                ~~~~~~~~~~^^^^^^^
TypeError: 'NoneType' object is not subscriptable
2024-11-19 12:01:10,710 - ERROR - 
2024-11-19 12:01:29,865 - ERROR - 
2024-11-19 12:02:19,032 - ERROR - 
2024-11-19 12:02:45,403 - ERROR - 
2024-11-19 12:02:58,056 - ERROR - 
2024-11-19 12:03:12,557 - ERROR - 
2024-11-19 12:04:18,564 - ERROR - 
2024-11-19 12:05:11,218 - ERROR - 
2024-11-19 12:06:16,951 - ERROR - 
2024-11-19 12:06:26,641 - ERROR - 
2024-11-19 12:07:05,939 - ERROR - 
2024-11-19 12:07:09,130 - ERROR - 
2024-11-19 12:07:48,525 - ERROR - 
2024-11-19 12:08:27,552 - ERROR - 
2024-11-19 12:11:46,844 - ERROR - 
2024-11-19 12:13:31,290 - ERROR - 400: Department already exists
2024-11-19 12:14:05,367 - ERROR - 
2024-11-19 13:27:35,703 - ERROR - Internal Server Error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')] - Request: GET http://localhost:8888/api/v1/departments/1212
Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 201, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2024-11-19 13:27:37,573 - ERROR - Internal Server Error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')] - Request: GET http://localhost:8888/api/v1/departments/1212
Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 201, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2024-11-19 13:27:54,755 - ERROR - Internal Server Error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')] - Request: GET http://localhost:8888/api/v1/departments/1212
Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 201, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2024-11-19 13:29:54,478 - ERROR - Internal Server Error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')] - Request: GET http://localhost:8888/api/v1/departments/1212
Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 201, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2024-11-19 13:30:02,029 - ERROR - Internal Server Error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')] - Request: GET http://localhost:8888/api/v1/departments/1212
Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 201, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2024-11-19 13:30:38,805 - ERROR - Internal Server Error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')] - Request: GET http://localhost:8888/api/v1/departments/01ade366-9af6-4d59-af6e-7c854f0ca7c9
Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 201, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2024-11-19 13:31:32,764 - ERROR - Internal Server Error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')] - Request: GET http://localhost:8888/api/v1/departments/01ade366-9af6-4d59-af6e-7c854f0ca7c9
Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 201, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2024-11-19 13:31:59,499 - ERROR - Internal Server Error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')] - Request: GET http://localhost:8888/api/v1/departments/01ade366-9af6-4d59-af6e-7c854f0ca7c9
Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 201, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2024-11-20 15:58:48,349 - ERROR - DepartmentService.add_staff_to_department() missing 1 required positional argument: 'hospital_id'
2024-11-20 16:03:17,168 - ERROR - Could not find field at `createOneUser.data.contact`
2024-11-20 16:03:17,169 - ERROR - 500: Could not find field at `createOneUser.data.contact`
2024-11-20 16:04:39,276 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-20 16:04:39,277 - ERROR - 500: Could not find field at `createOneUser.data.role`
2024-11-20 16:05:51,976 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-20 16:05:51,976 - ERROR - 500: Could not find field at `createOneUser.data.role`
2024-11-20 16:06:32,698 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-20 16:06:32,698 - ERROR - 500: Could not find field at `createOneUser.data.role`
2024-11-20 16:07:08,081 - ERROR - 404: Department not found
2024-11-20 16:08:53,810 - ERROR - Unique constraint failed on the fields: (`email`)
2024-11-20 16:08:53,810 - ERROR - 500: Unique constraint failed on the fields: (`email`)
2024-11-20 16:11:06,932 - ERROR - 404: Department not found
2024-11-20 16:12:20,775 - ERROR - 404: Department not found
2024-11-20 16:12:23,094 - ERROR - 404: Department not found
2024-11-20 16:12:35,697 - ERROR - 404: Department not found
2024-11-20 16:12:41,393 - ERROR - 404: Department not found
2024-11-20 16:13:06,202 - ERROR - 404: Department not found
2024-11-20 16:13:09,651 - ERROR - 404: Department not found
2024-11-20 16:13:35,440 - ERROR - 404: Department not found
2024-11-20 16:13:39,289 - ERROR - 404: Department not found
2024-11-20 16:13:44,273 - ERROR - 404: Department not found
2024-11-20 16:13:58,533 - ERROR - 404: Department not found
2024-11-20 16:14:07,721 - ERROR - 404: Department not found
2024-11-20 16:14:14,431 - ERROR - 404: Department not found
2024-11-20 16:14:26,940 - ERROR - 404: Department not found
2024-11-20 16:14:27,563 - ERROR - 404: Department not found
2024-11-20 16:15:26,691 - ERROR - 404: Department not found
2024-11-20 16:15:38,403 - ERROR - 404: Department not found
2024-11-20 16:20:24,261 - ERROR - 404: Department not found
2024-11-20 16:27:30,774 - ERROR - name 'DepartmentNotFound' is not defined
2024-11-20 16:27:47,314 - ERROR - 
2024-11-20 16:27:59,687 - ERROR - 
2024-11-20 16:28:58,441 - ERROR - 
2024-11-20 16:29:32,844 - ERROR - 
2024-11-20 16:29:34,010 - ERROR - 
2024-11-20 16:29:54,483 - ERROR - 404: {'message': 'You do not have enough permissions to perform this action', 'error_code': 'insufficient_permissions'}
2024-11-20 16:30:05,531 - ERROR - 404: {'message': 'You do not have enough permissions to perform this action', 'error_code': 'insufficient_permissions'}
2024-11-20 16:30:10,495 - ERROR - 404: {'message': 'You do not have enough permissions to perform this action', 'error_code': 'insufficient_permissions'}
2024-11-20 16:30:11,835 - ERROR - 404: {'message': 'You do not have enough permissions to perform this action', 'error_code': 'insufficient_permissions'}
2024-11-20 16:30:14,739 - ERROR - 404: {'message': 'You do not have enough permissions to perform this action', 'error_code': 'insufficient_permissions'}
2024-11-20 16:30:53,301 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:30:55,552 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:33:17,688 - ERROR - 
2024-11-20 16:33:24,384 - ERROR - 
2024-11-20 16:33:25,237 - ERROR - 
2024-11-20 16:34:21,671 - ERROR - 
2024-11-20 16:34:23,839 - ERROR - 
2024-11-20 16:34:30,187 - ERROR - 
2024-11-20 16:34:33,955 - ERROR - 
2024-11-20 16:35:00,384 - ERROR - 
2024-11-20 16:35:10,382 - ERROR - 
2024-11-20 16:35:24,320 - ERROR - 
2024-11-20 16:35:26,078 - ERROR - 
2024-11-20 16:35:27,011 - ERROR - 
2024-11-20 16:35:28,624 - ERROR - 
2024-11-20 16:35:41,438 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:35:43,030 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:35:43,981 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:35:56,595 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:36:49,787 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:37:57,040 - ERROR - 404: Department not found
2024-11-20 16:37:59,737 - ERROR - 404: Department not found
2024-11-20 16:38:30,654 - ERROR - 404: Department not found
2024-11-20 16:38:42,010 - ERROR - 404: Department not found
2024-11-20 16:38:46,076 - ERROR - 404: Department not found
2024-11-20 16:38:48,083 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:39:25,090 - ERROR - 404: Department not found
2024-11-20 16:39:26,630 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:39:26,864 - ERROR - 404: Department not found
2024-11-20 16:39:28,261 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:40:29,804 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:41:33,942 - ERROR - DepartmentService.add_staff_to_department() missing 1 required positional argument: 'hospital'
2024-11-20 16:42:39,100 - ERROR - 404: Department not found
2024-11-20 16:43:35,719 - ERROR - Unique constraint failed on the fields: (`email`)
2024-11-20 16:43:35,719 - ERROR - 500: Unique constraint failed on the fields: (`email`)
2024-11-20 16:48:46,551 - ERROR - 'dict' object has no attribute 'email'
2024-11-20 16:50:00,823 - ERROR - 403: {'message': 'User already exists in department', 'error_code': 'user_already_exists_in_department'}
2024-11-20 16:51:07,208 - ERROR - 403: {'message': 'User already exists in department', 'error_code': 'user_already_exists_in_department'}
2024-11-20 16:51:12,741 - ERROR - 403: {'message': 'User already exists in department', 'error_code': 'user_already_exists_in_department'}
2024-11-20 16:54:04,041 - ERROR - 403: {'message': 'User already exists in department', 'error_code': 'user_already_exists_in_department'}
2024-11-20 16:54:10,888 - ERROR - 403: {'message': 'User already exists in department', 'error_code': 'user_already_exists_in_department'}
2024-11-20 16:54:21,841 - ERROR - 403: {'message': 'User already exists in department', 'error_code': 'user_already_exists_in_department'}
2024-11-20 16:54:42,859 - ERROR - 404: Department not found
2024-11-20 16:55:04,158 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:56:07,868 - ERROR - 404: Department not found
2024-11-20 16:57:10,811 - ERROR - 404: {'message': 'Department not found', 'error_code': 'department_not_found'}
2024-11-20 16:57:53,523 - ERROR - 404: Department not found
2024-11-21 23:23:31,267 - ERROR - 404: Department not found
2024-11-21 23:23:31,369 - ERROR - 404: Department not found
2024-11-21 23:23:38,190 - ERROR - 404: Department not found
2024-11-21 23:24:40,928 - ERROR - 404: Department not found
2024-11-21 23:24:55,652 - ERROR - 404: Department not found
2024-11-21 23:25:16,733 - ERROR - 404: Department not found
2024-11-21 23:25:35,798 - ERROR - 404: Department not found
2024-11-21 23:25:36,061 - ERROR - 404: Department not found
2024-11-21 23:35:32,199 - ERROR - 404: Department not found
2024-11-21 23:35:46,929 - ERROR - 404: Department not found
2024-11-21 23:41:33,870 - ERROR - 404: Department not found
2024-11-21 23:42:04,882 - ERROR - 404: Department not found
2024-11-21 23:43:29,292 - ERROR - 404: Department not found
2024-11-21 23:45:21,708 - ERROR - 404: Department not found
2024-11-21 23:45:54,815 - ERROR - 404: Department not found
2024-11-21 23:48:12,295 - ERROR - 404: Department not found
2024-11-21 23:48:34,208 - ERROR - 404: Department not found
2024-11-21 23:48:47,503 - ERROR - 404: Department not found
2024-11-21 23:48:48,759 - ERROR - 404: Department not found
2024-11-21 23:49:15,026 - ERROR - 404: Department not found
2024-11-21 23:49:44,494 - ERROR - 404: Department not found
2024-11-21 23:52:21,487 - ERROR - 404: Department not found
2024-11-21 23:52:26,016 - ERROR - 404: Department not found
2024-11-21 23:52:51,013 - ERROR - 404: Department not found
2024-11-21 23:52:54,637 - ERROR - 404: Department not found
2024-11-21 23:52:57,737 - ERROR - 404: Department not found
2024-11-21 23:53:03,169 - ERROR - 404: Department not found
2024-11-21 23:53:51,158 - ERROR - 404: Department not found
2024-11-21 23:53:55,066 - ERROR - 404: Department not found
2024-11-21 23:53:59,848 - ERROR - 404: Department not found
2024-11-21 23:54:08,271 - ERROR - 404: Department not found
2024-11-21 23:54:27,023 - ERROR - 404: Department not found
2024-11-21 23:55:20,768 - ERROR - 404: Department not found
2024-11-21 23:56:15,729 - ERROR - 404: Department not found
2024-11-21 23:56:16,756 - ERROR - 404: Department not found
2024-11-21 23:56:57,394 - ERROR - 404: Department not found
2024-11-22 00:00:48,901 - ERROR - 404: Department not found
2024-11-22 00:18:34,684 - ERROR - 404: Department not found
2024-11-22 00:20:38,183 - ERROR - 404: Department not found
2024-11-22 00:46:09,305 - ERROR - 404: Department not found
2024-11-22 01:49:57,519 - ERROR - 404: Department not found
2024-11-22 13:24:30,331 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:24:45,342 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:24:49,994 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:25:01,303 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:25:26,646 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:25:28,688 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:25:43,222 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:26:27,417 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:26:45,667 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:26:46,179 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:27:33,375 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:27:42,565 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:28:13,349 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:28:21,678 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 47, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:29:06,298 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:29:09,143 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:29:43,520 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:30:10,887 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:30:31,152 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:32:50,929 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 13:33:07,502 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:19:36,741 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:21:56,134 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:27:23,368 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:29:20,630 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:30:16,736 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:30:18,674 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:33:42,116 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:34:17,746 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:35:21,898 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:35:29,994 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:37:30,040 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:39:25,067 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:41:40,690 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:41:49,028 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:44:20,666 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:44:39,756 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:44:50,588 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:49:44,953 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:50:10,978 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:52:49,561 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:54:21,786 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:55:25,649 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:55:59,415 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:56:34,415 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:57:00,836 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:57:03,876 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:57:17,034 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:57:41,272 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:59:26,706 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 15:59:31,584 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:00:11,166 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:01:01,951 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:03:50,358 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:03:51,324 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:04:38,787 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/sfrefr
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:04:46,273 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/sfrefr
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:04:52,446 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/sfrefr
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:06:03,429 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/sfrefr
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:06:10,362 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:07:14,275 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:11:48,089 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:17:28,739 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:17:36,955 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:17:39,395 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:17:40,533 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:17:41,341 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 22, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\user_controlller.py", line 64, in get_users_by_hospital_id
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:19:04,782 - ERROR - Internal Server Error: All connection attempts failed - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpx\_transports\default.py", line 72, in map_httpcore_exceptions
    yield
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpx\_transports\default.py", line 377, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 216, in handle_async_request
    raise exc from None
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 196, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpcore\_async\connection.py", line 99, in handle_async_request
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpcore\_async\connection.py", line 76, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpcore\_async\connection.py", line 122, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpcore\_backends\auto.py", line 30, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 115, in connect_tcp
    with map_exceptions(exc_map):
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: All connection attempts failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\dependencies.py", line 33, in __call__
    existing_token = await db.prisma.verificationtoken.find_unique(where={"token": self.token})
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\prisma\actions.py", line 1379, in find_unique
    resp = await self._client._execute(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\prisma\_base_client.py", line 543, in _execute
    return await self._engine.query(builder.build(), tx_id=self._tx_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\prisma\engine\_query.py", line 402, in query
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\prisma\engine\_http.py", line 217, in request
    response = await self.session.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\prisma\_async_http.py", line 26, in request
    return Response(await self.session.request(method, url, **kwargs))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpx\_client.py", line 1585, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpx\_client.py", line 1674, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpx\_client.py", line 1702, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpx\_client.py", line 1739, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpx\_client.py", line 1776, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpx\_transports\default.py", line 376, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\httpx\_transports\default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: All connection attempts failed
2024-11-22 16:19:08,838 - ERROR - Internal Server Error: name 'token_details' is not defined - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |                                                                       ^^^^^^^^^^^^^
    | NameError: name 'token_details' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
                                                                      ^^^^^^^^^^^^^
NameError: name 'token_details' is not defined
2024-11-22 16:19:18,570 - ERROR - Internal Server Error: name 'token_details' is not defined - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |                                                                       ^^^^^^^^^^^^^
    | NameError: name 'token_details' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
                                                                      ^^^^^^^^^^^^^
NameError: name 'token_details' is not defined
2024-11-22 16:19:26,465 - ERROR - Internal Server Error: name 'token_details' is not defined - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |                                                                       ^^^^^^^^^^^^^
    | NameError: name 'token_details' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
                                                                      ^^^^^^^^^^^^^
NameError: name 'token_details' is not defined
2024-11-22 16:20:09,125 - ERROR - Internal Server Error: name 'token_details' is not defined - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |                                                                       ^^^^^^^^^^^^^
    | NameError: name 'token_details' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
                                                                      ^^^^^^^^^^^^^
NameError: name 'token_details' is not defined
2024-11-22 16:20:12,605 - ERROR - Internal Server Error: name 'token_details' is not defined - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |                                                                       ^^^^^^^^^^^^^
    | NameError: name 'token_details' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
                                                                      ^^^^^^^^^^^^^
NameError: name 'token_details' is not defined
2024-11-22 16:20:17,671 - ERROR - Internal Server Error: name 'token_details' is not defined - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |                                                                       ^^^^^^^^^^^^^
    | NameError: name 'token_details' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
                                                                      ^^^^^^^^^^^^^
NameError: name 'token_details' is not defined
2024-11-22 16:21:37,314 - ERROR - Internal Server Error: name 'token_details' is not defined - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |                                                                       ^^^^^^^^^^^^^
    | NameError: name 'token_details' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
                                                                      ^^^^^^^^^^^^^
NameError: name 'token_details' is not defined
2024-11-22 16:48:36,410 - ERROR - Internal Server Error: name 'token_details' is not defined - Request: GET http://localhost:8888/api/v1/user/hospital/sfrefrkjukhgmghmnhjgmh
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    |     return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
    |                                                                       ^^^^^^^^^^^^^
    | NameError: name 'token_details' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\user_routes.py", line 24, in get_users
    return await user_controller.get_users_by_hospital_id(hospital_id, token_details["email"])
                                                                      ^^^^^^^^^^^^^
NameError: name 'token_details' is not defined
2024-11-22 16:53:13,860 - ERROR - Internal Server Error: module 'lib.error_logger' has no attribute 'error' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    |     return await hospital_controller.get_users(hospital_id, token_details["email"])
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    |     error_logger.error(e)
    |     ^^^^^^^^^^^^^^^^^^
    | AttributeError: module 'lib.error_logger' has no attribute 'error'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\hospital_routes.py", line 48, in get_users
    return await hospital_controller.get_users(hospital_id, token_details["email"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\controllers\hospital_controller.py", line 70, in get_users
    error_logger.error(e)
    ^^^^^^^^^^^^^^^^^^
AttributeError: module 'lib.error_logger' has no attribute 'error'
2024-11-22 16:55:50,633 - ERROR - Could not find field at `findManyUser.where.hospital_id`
2024-11-22 16:57:10,036 - ERROR - Could not find field at `findManyUser.where.hospital_id`
2024-11-23 12:44:03,252 - ERROR - Internal Server Error: 'NoneType' object has no attribute 'role' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func, *args)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    |     if current_user.role in self.allowed_roles:
    |        ^^^^^^^^^^^^^^^^^
    | AttributeError: 'NoneType' object has no attribute 'role'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    if current_user.role in self.allowed_roles:
       ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'role'
2024-11-23 12:45:59,630 - ERROR - Internal Server Error: 'NoneType' object has no attribute 'role' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func, *args)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    |     if current_user.role in self.allowed_roles:
    |        ^^^^^^^^^^^^^^^^^
    | AttributeError: 'NoneType' object has no attribute 'role'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    if current_user.role in self.allowed_roles:
       ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'role'
2024-11-23 12:47:29,093 - ERROR - Internal Server Error: 'NoneType' object has no attribute 'role' - Request: GET http://localhost:8888/api/v1/hospital/users/ad9780de-c3d7-4f0c-93b6-1448b05fd281
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func, *args)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    |     if current_user.role in self.allowed_roles:
    |        ^^^^^^^^^^^^^^^^^
    | AttributeError: 'NoneType' object has no attribute 'role'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    if current_user.role in self.allowed_roles:
       ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'role'
2024-11-23 12:47:51,964 - ERROR - Internal Server Error: 'NoneType' object has no attribute 'role' - Request: POST http://localhost:8888/api/v1/departments/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func, *args)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    |     if current_user.role in self.allowed_roles:
    |        ^^^^^^^^^^^^^^^^^
    | AttributeError: 'NoneType' object has no attribute 'role'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    if current_user.role in self.allowed_roles:
       ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'role'
2024-11-23 12:48:07,369 - ERROR - Internal Server Error: 'NoneType' object has no attribute 'role' - Request: POST http://localhost:8888/api/v1/departments/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func, *args)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    |     if current_user.role in self.allowed_roles:
    |        ^^^^^^^^^^^^^^^^^
    | AttributeError: 'NoneType' object has no attribute 'role'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    if current_user.role in self.allowed_roles:
       ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'role'
2024-11-23 12:48:33,280 - ERROR - Internal Server Error: 'NoneType' object has no attribute 'role' - Request: POST http://localhost:8888/api/v1/departments/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func, *args)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    |     if current_user.role in self.allowed_roles:
    |        ^^^^^^^^^^^^^^^^^
    | AttributeError: 'NoneType' object has no attribute 'role'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    if current_user.role in self.allowed_roles:
       ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'role'
2024-11-23 12:49:58,633 - ERROR - Internal Server Error: 'NoneType' object has no attribute 'role' - Request: POST http://localhost:8888/api/v1/departments/
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func, *args)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    |     print(current_user.role)
    |           ^^^^^^^^^^^^^^^^^
    | AttributeError: 'NoneType' object has no attribute 'role'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 630, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2405, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 914, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\role_checker.py", line 19, in __call__
    print(current_user.role)
          ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'role'
2024-11-23 13:04:36,193 - ERROR - Error occurred: HospitalAlreadyExists -  - Request: POST http://localhost:8888/api/v1/hospital/onboard
2024-11-23 13:08:03,602 - ERROR - 404: No departments found
2024-11-23 13:09:31,107 - ERROR - 404: No departments found
2024-11-23 13:09:31,816 - ERROR - 404: No departments found
2024-11-23 13:10:31,933 - ERROR - 404: No departments found
2024-11-23 13:12:21,872 - ERROR - 404: No departments found
2024-11-23 13:15:34,718 - ERROR - 404: No departments found
2024-11-23 16:04:50,006 - ERROR - Internal Server Error: name 'token_' is not defined - Request: DELETE http://localhost:8888/api/v1/departments/0771ea39-d4e8-47f6-9a21-16bcb1ffdf1e
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    |     raise app_exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\department_routes.py", line 32, in delete_department
    |     return await department_controller.delete_department(department_id, token_)
    |                                                                         ^^^^^^
    | NameError: name 'token_' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 185, in __call__
    with collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\lib\middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Khalifa\Desktop\fastapi_homs_be\app\routes\department_routes.py", line 32, in delete_department
    return await department_controller.delete_department(department_id, token_)
                                                                        ^^^^^^
NameError: name 'token_' is not defined
2024-11-23 16:50:56,628 - ERROR - Could not find field at `createOneUser.data.role`
2024-11-23 16:50:56,647 - ERROR - 500: Could not find field at `createOneUser.data.role`
2024-11-23 17:10:20,259 - ERROR - 404: No departments found
2024-11-23 17:10:44,000 - ERROR - 404: No departments found
2024-11-23 17:11:22,261 - ERROR - 
2024-11-23 17:11:26,250 - ERROR - 
2024-11-23 17:11:28,701 - ERROR - 
2024-11-23 17:11:29,674 - ERROR - 
2024-11-23 17:11:30,429 - ERROR - 
2024-11-23 17:11:31,435 - ERROR - 
2024-11-23 17:12:06,549 - ERROR - 404: No departments found
2024-11-23 17:12:09,211 - ERROR - 404: No departments found
2024-11-23 17:15:59,099 - ERROR - 404: No departments found
2024-11-23 17:17:06,844 - ERROR - 404: No departments found
2024-11-23 17:17:56,921 - ERROR - 404: No departments found
2024-11-23 17:18:30,605 - ERROR - 404: No departments found
2024-11-23 18:31:46,720 - ERROR - 403: {'message': 'User already exists in department', 'error_code': 'user_already_exists_in_department'}
2024-11-23 21:27:50,371 - ERROR - 
2024-11-23 21:27:50,533 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:28:16,441 - ERROR - 
2024-11-23 21:28:16,473 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:28:53,303 - ERROR - 
2024-11-23 21:28:53,831 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:29:01,142 - ERROR - 
2024-11-23 21:29:01,295 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:29:17,001 - ERROR - 
2024-11-23 21:29:17,053 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:29:24,508 - ERROR - 
2024-11-23 21:29:24,579 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:38:13,295 - ERROR - 
2024-11-23 21:38:13,333 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:40:51,553 - ERROR - 
2024-11-23 21:40:51,613 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:40:59,229 - ERROR - 
2024-11-23 21:40:59,265 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:41:55,902 - ERROR - 
2024-11-23 21:41:55,935 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:53:31,061 - ERROR - 
2024-11-23 21:53:31,123 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 21:54:50,396 - ERROR - 
2024-11-23 21:54:50,443 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 23:27:17,499 - ERROR - 
2024-11-23 23:27:17,588 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 23:27:54,578 - ERROR - 
2024-11-23 23:27:54,649 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 23:27:55,862 - ERROR - 
2024-11-23 23:27:55,960 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2024-11-23 23:30:11,532 - ERROR - 
2024-11-23 23:30:11,582 - ERROR - Error occurred: InsufficientPermission -  - Request: GET http://localhost:8888/api/v1/hospital/users/520fa137-ae04-4026-83a7-02e615080761
2025-03-17 20:25:16,549 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:25:16,801 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:28:03,439 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:28:03,863 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:28:55,499 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:28:55,740 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:32:23,533 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:32:23,839 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:33:59,993 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:34:00,233 - ERROR - Internal Server Error: Error 111 connecting to localhost:6379. Connection refused. - Request: GET http://localhost:8888/api/v1/auth/verify
  + Exception Group Traceback (most recent call last):
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 736, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |          ^^^^^^^^^^^^^^^^^^^^
    |   File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    |     raise exc
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    |     if await token_in_blocklist(token_data['jti']):
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    |     jti_value = await token_blocklist.get(jti)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    |     await connection.connect()
    |   File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/trustedhost.py", line 51, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
  File "/home/linuxbrew/.linuxbrew/opt/python@3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/middleware.py", line 19, in custom_logging
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 628, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/dependencies.py", line 52, in __call__
    if await token_in_blocklist(token_data['jti']):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/app/lib/redis.py", line 14, in token_in_blocklist
    jti_value = await token_blocklist.get(jti)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1058, in get_connection
    await self.ensure_connection(connection)
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 1091, in ensure_connection
    await connection.connect()
  File "/home/ssa/Desktop/fastapi_homs_be/venv/lib/python3.12/site-packages/redis/asyncio/connection.py", line 283, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
2025-03-17 20:35:57,142 - ERROR - 404: No departments found
